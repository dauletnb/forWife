<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ü–∏—Å—å–º–æ –¥–ª—è –ñ–∞–Ω—ã–º</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      height: 100%;
      overflow: hidden;
      background: #000;
      position: relative;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-image: url('https://w.wallhaven.cc/full/rd/wallhaven-rdqqpm.jpg');
      background-size: cover;
      background-position: center;
      filter: brightness(0.4);
      z-index: 0;
    }

    canvas {
      position: fixed;
      top: 0; left: 0;
      z-index: 1;
      pointer-events: none;
    }

    .centered {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
      text-align: center;
    }

    .envelope {
      width: 150px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .envelope:hover {
      transform: scale(1.1);
    }

    .btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #fff;
      color: #333;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .btn:hover {
      background-color: #f0f0f0;
    }

    .typewriter-container {
      position: relative;
      z-index: 3;
      max-width: 600px;
      margin: auto;
      padding: 30px;
      margin-top: 4vh;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(8px);
      font-size: 1em;
      color: white;
      line-height: 1.6;
      white-space: pre-wrap;
      border-left: 3px solid #fff;
      animation: blink-caret 0.8s step-end infinite;
      display: none;
    }

    h1 {
      text-align: center;
      color: #fff;
      z-index: 3;
      position: relative;
      margin-top: 4vh;
      display: none;
    }

    @keyframes blink-caret {
      from, to { border-color: transparent; }
      50% { border-color: white; }
    }

    /* –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä */
    #musicBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 4;
      background: rgba(255,255,255,0.8);
      border: none;
      border-radius: 8px;
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    #musicBtn:hover {
      background: rgba(255,255,255,0.9);
      transform: scale(1.05);
    }

    /* –°–µ–ª–µ–∫—Ç–æ—Ä –º—É–∑—ã–∫–∏ */
    .music-selector {
      position: fixed;
      bottom: 80px;
      right: 20px;
      z-index: 4;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      border-radius: 10px;
      padding: 15px;
      display: none;
      color: white;
    }

    .music-selector select {
      background: rgba(255,255,255,0.9);
      border: none;
      border-radius: 5px;
      padding: 8px 12px;
      margin-top: 5px;
      width: 250px;
      font-size: 13px;
    }

    .music-selector label {
      font-size: 14px;
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>

<canvas id="starsCanvas"></canvas>

<div class="centered" id="envelopeSection">
  <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" class="envelope" alt="–ö–æ–Ω–≤–µ—Ä—Ç">
  <br>
  <button class="btn" onclick="openLetter()">–û—Ç–∫—Ä—ã—Ç—å –ø–∏—Å—å–º–æ</button>
</div>

<h1 id="header">–° –¥–Ω—ë–º –≤—ã–ø—É—Å–∫–Ω–æ–≥–æ, –ª—é–±–∏–º–∞—è üå∏</h1>

<div class="typewriter-container" id="typewriter"></div>

<!-- –°–µ–ª–µ–∫—Ç–æ—Ä –º—É–∑—ã–∫–∏ -->
<div class="music-selector" id="musicSelector">
  <label for="musicSelect">–í—ã–±–µ—Ä–∏—Ç–µ –º—É–∑—ã–∫—É:</label>
  <select id="musicSelect">
    <option value="https://archive.org/download/piano-music/Romantic%20Piano%20Music.mp3">–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä—Ç–µ–ø–∏–∞–Ω–Ω–∞—è –º—É–∑—ã–∫–∞ ‚ô•</option>
    <option value="https://archive.org/download/piano-music/Relaxing%20Piano%20Music.mp3">–†–∞—Å—Å–ª–∞–±–ª—è—é—â–µ–µ —Ñ–æ—Ä—Ç–µ–ø–∏–∞–Ω–æ üåô</option>
    <option value="https://archive.org/download/relaxing-piano-neo-classical-collection/02%20Annie%20Warden%20-%20Sad%20Music.mp3">–ì—Ä—É—Å—Ç–Ω–∞—è –º–µ–ª–æ–¥–∏—è üíî</option>
    <option value="https://archive.org/download/calm-relaxing-piano-collection/03%20Olga%20Scheps%20-%20Una%20mattina.mp3">–£—Ç—Ä–µ–Ω–Ω—è—è –º–µ–ª–æ–¥–∏—è üåÖ</option>
    <option value="https://archive.org/download/TheBestOfClassicalMusicMozartBeethovenBachChopin...ClassicalMusicPianoPlaylistMix/Relaxing%20Beautiful%20Romantic%20Music%20Piano%20Music%2C%20Violin%20Music%2C%20Cello%20Music%2C%20Guitar%20Music%20%E2%98%8574.mp3">–ö—Ä–∞—Å–∏–≤–∞—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –º—É–∑—ã–∫–∞ üéª</option>
    <option value="https://archive.org/download/TheBestOfClassicalMusicMozartBeethovenBachChopin...ClassicalMusicPianoPlaylistMix/The%20Best%20Of%20YIRUMA%20Yiruma%27s%20Greatest%20Hits%20%7E%20Best%20Piano.mp3">–õ—É—á—à–µ–µ –æ—Ç Yiruma üéπ</option>
  </select>
</div>

<!-- –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä -->
<button id="musicBtn">üéµ –ú—É–∑—ã–∫–∞</button>

<audio id="bgMusic" loop preload="auto">
  <source src="https://archive.org/download/piano-music/Romantic%20Piano%20Music.mp3" type="audio/mpeg">
  <source src="https://archive.org/download/piano-music/Relaxing%20Piano%20Music.mp3" type="audio/mpeg">
  –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
</audio>

<script>
  // üå∏ –ú–∞—à–∏–Ω–æ–ø–∏—Å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
  const text = `–ñ–∞–Ω—ã–º,
—Ç—ã —Å–≤–µ—Ç–∏—à—å—Å—è —è—Ä—á–µ –ª—é–±—ã—Ö —Ü–≤–µ—Ç–æ–≤ –≤ —ç—Ç–æ–º –±—É–∫–µ—Ç–µ.
–¢—ã —Å–∏–ª—å–Ω–∞—è, –∫—Ä–∞—Å–∏–≤–∞—è, –Ω–∞—Å—Ç–æ—è—â–∞—è.
–¢—ã –ø—Ä–æ—Ö–æ–¥–∏—à—å –≤–∞–∂–Ω—ã–π —ç—Ç–∞–ø ‚Äî –∏ —Ä–∞—Å—Ü–≤–µ—Ç–∞–µ—à—å.

–°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –≤—ã–ø—É—Å–∫–Ω–æ–π,
–Ω–æ –¥–ª—è —Ç–µ–±—è –≤—Å—ë —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è.
–ò –º–Ω–µ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø–æ–≤–µ–∑–ª–æ –∏–¥—Ç–∏ —Å —Ç–æ–±–æ–π —Ä—è–¥–æ–º.
–¢—ã ‚Äî –º–æ—è –æ–ø–æ—Ä–∞, –º–æ—ë –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –º–æ—ë —á—É–¥–æ.
–° —Ç–æ–±–æ–π —è —Ö–æ—á—É —Ä–∞—Å—Ç–∏.

–Ø —Ä—è–¥–æ–º ‚Äî –≤—Å–µ–≥–¥–∞.
–ò —è –ª—é–±–ª—é —Ç–µ–±—è.

–° –ª—é–±–æ–≤—å—é,
–î–∞—É–ª–µ—Ç`;

  function openLetter() {
    document.getElementById('envelopeSection').style.display = 'none';
    document.getElementById('header').style.display = 'block';
    const typewriter = document.getElementById("typewriter");
    typewriter.style.display = 'block';
    let i = 0;
    function typeWriter() {
      if (i < text.length) {
        typewriter.textContent += text.charAt(i);
        i++;
        setTimeout(typeWriter, 45);
      }
    }
    typeWriter();
  }

  // üåü –ü–∞–¥–∞—é—â–∏–µ –∑–≤—ë–∑–¥—ã
  const canvas = document.getElementById('starsCanvas');
  const ctx = canvas.getContext('2d');
  let width, height;

  function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
  }

  window.addEventListener('resize', resize);
  resize();

  const stars = [];

  class Star {
    constructor() {
      this.reset();
    }

    reset() {
      this.x = Math.random() * width;
      this.y = Math.random() * -height;
      this.speedY = 2 + Math.random() * 0.1; // –ë—ã—Å—Ç—Ä–µ–µ, —á–µ–º –ª–µ–ø–µ—Å—Ç–∫–∏
      this.speedX = Math.random() * 0.5 - 0.25; // –õ—ë–≥–∫–æ–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
      this.size = 2 + Math.random() * 3; // –ú–∞–ª–µ–Ω—å–∫–∏–µ –∑–≤—ë–∑–¥—ã
      this.opacity = 0.5 + Math.random() * 0.5; // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ
    }

    update() {
      this.y += this.speedY;
      this.x += this.speedX;
      if (this.y > height) this.reset();
    }

    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255, 215, 0, ${this.opacity})`; // –ó–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç
      ctx.fill();
      // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
      ctx.shadowBlur = 10;
      ctx.shadowColor = 'rgba(255, 215, 0, 0.5)';
    }
  }

  for (let i = 0; i < 35; i++) { // –£–º–µ–Ω—å—à–µ–Ω–æ –¥–æ 25 –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    stars.push(new Star());
  }

  function animate() {
    ctx.clearRect(0, 0, width, height);
    for (let star of stars) {
      star.update();
      star.draw();
    }
    requestAnimationFrame(animate);
  }

  animate();

  // üéµ –ú—É–∑—ã–∫–∞
  const music = document.getElementById('bgMusic');
  const musicBtn = document.getElementById('musicBtn');
  const musicSelector = document.getElementById('musicSelector');
  const musicSelect = document.getElementById('musicSelect');
  let isPlaying = false;

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
  musicBtn.addEventListener('click', () => {
    if (!isPlaying) {
      music.play().then(() => {
        musicBtn.textContent = '‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å';
        isPlaying = true;
      }).catch(e => {
        console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', e);
        musicBtn.textContent = '‚ùå –û—à–∏–±–∫–∞';
        setTimeout(() => {
          musicBtn.textContent = 'üéµ –ú—É–∑—ã–∫–∞';
        }, 2000);
      });
    } else {
      music.pause();
      musicBtn.textContent = 'üéµ –ú—É–∑—ã–∫–∞';
      isPlaying = false;
    }
  });

  // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä –º—É–∑—ã–∫–∏ –ø—Ä–∏ –ø—Ä–∞–≤–æ–º –∫–ª–∏–∫–µ
  musicBtn.addEventListener('contextmenu', (e) => {
    e.preventDefault();
    musicSelector.style.display = musicSelector.style.display === 'none' ? 'block' : 'none';
  });

  // –°–º–µ–Ω–∞ –º—É–∑—ã–∫–∏
  musicSelect.addEventListener('change', () => {
    const wasPlaying = isPlaying;
    if (isPlaying) {
      music.pause();
      isPlaying = false;
    }
    
    music.src = musicSelect.value;
    music.load();
    
    if (wasPlaying) {
      music.play().then(() => {
        isPlaying = true;
        musicBtn.textContent = '‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å';
      }).catch(e => {
        console.log('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç—Ä–µ–∫–∞:', e);
        musicBtn.textContent = 'üéµ –ú—É–∑—ã–∫–∞';
      });
    }
    
    musicSelector.style.display = 'none';
  });

  // –°–æ–±—ã—Ç–∏—è –∞—É–¥–∏–æ
  music.addEventListener('ended', () => {
    isPlaying = false;
    musicBtn.textContent = 'üéµ –ú—É–∑—ã–∫–∞';
  });

  music.addEventListener('error', (e) => {
    console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞—É–¥–∏–æ:', e);
    musicBtn.textContent = '‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
    setTimeout(() => {
      musicBtn.textContent = 'üéµ –ú—É–∑—ã–∫–∞';
    }, 3000);
  });

  // –°–∫—Ä—ã—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
  document.addEventListener('click', (e) => {
    if (!musicSelector.contains(e.target) && e.target !== musicBtn) {
      musicSelector.style.display = 'none';
    }
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏
  music.addEventListener('canplaythrough', () => {
    console.log('–ê—É–¥–∏–æ –≥–æ—Ç–æ–≤–æ –∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é');
  });

</script>
</body>
</html>